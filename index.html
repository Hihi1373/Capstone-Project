<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Robot Sensor Game</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="/style.css" />
</head>

<style>
  /* ---------- shared base ---------- */
  body { background: #f7f7fb; }
  .panel {
    border: 1px solid #d0d0d8;
    border-radius: 12px;
    padding: 16px;
    background: white;
  }

  /* ---------- DESIGN MODE styles ---------- */
  #design-screen .mode-header {
    background: #e7f3ff;
    border: 1px solid #b9ddff;
    color: #0b5ed7;
  }

  #design-layout {
    display: grid;
    grid-template-columns: 320px 1fr;
    gap: 18px;
    align-items: start;
  }

  #builder-preview {
    height: 420px;
    display: grid;
    place-items: center;
    background: #eef6ff;
    border: 2px dashed #9ecbff;
    border-radius: 12px;
    position: relative;
    overflow: hidden;
  }

  /* Big robot preview in design */
  #map {
    position: relative;
    width: 280px;
    height: 280px;
    border: 2px solid #333;
    margin: 0;
    background: #eef;
    overflow: hidden;
  }

  /* ---------- SIMULATION MODE styles ---------- */
  #simulation-screen .mode-header {
    background: #111827;
    border: 1px solid #2b3446;
    color: #fff;
  }

  #sim-panel {
    background: #0f172a;
    border: 1px solid #24304a;
    border-radius: 12px;
    padding: 16px;
  }

  #sim-panel .hint {
    color: #cbd5e1;
    font-size: 14px;
    margin-bottom: 10px;
  }

  /* Full map in simulation */
  #map-sim {
    position: relative;
    width: 600px;
    height: 400px;
    border: 2px solid #333;
    margin-bottom: 0;
    background: #eef;
    overflow: hidden;
  }

  /* ---------- robot + wheels ---------- */
  #robot, #robot-sim {
    position: absolute;
    width: 60px;
    height: 60px;
    top: 170px;
    left: 270px;
    transform-origin: center;
  }

  #robot-body, #robot-body-sim {
    width: 100%;
    height: 100%;
    background: #555;
    border-radius: 8px;
    position: relative;
  }

  .wheel {
    width: 12px;
    height: 12px;
    background: #333;
    border-radius: 50%;
    position: absolute;
  }

  .wheel-tl { top: 4px; left: 4px; }
  .wheel-bl { bottom: 4px; left: 4px; }
  .wheel-tr { top: 4px; right: 4px; }
  .wheel-br { bottom: 4px; right: 4px; }

  /* ---------- sensors ---------- */
  #sensor-tray {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .sensor {
    width: 160px;
    padding: 10px;
    text-align: center;
    font-size: 12px;
    border-radius: 10px;
    cursor: grab;
    user-select: none;
    margin-bottom: 6px;
    font-weight: 600;
  }

  .motion { background: #ffb703; }
  .proximity { background: #8ecae6; }
  .vision { background: #b5179e; color: white; }

</style>

<body class="p-4" tabindex="0">
  <div class="container">

    <p id="instruction" class="alert alert-info">
      Mode: <b id="mode-label">Design</b> â€” Drag sensors onto the robot.
    </p>

    <button id="mode-toggle" class="btn btn-primary mb-3">
      Switch to Simulation Mode
    </button>

    <!-- ========================= -->
    <!-- DESIGN SCREEN -->
    <!-- ========================= -->
    <div id="design-screen">

      <div class="panel mode-header mb-3">
        <h3 class="m-0">ðŸ›  ROBOT BUILDER (Design Mode)</h3>
        <div style="opacity:.85">Drag sensors onto the robot to configure your MVP.</div>
      </div>

      <div id="design-layout">
        <!-- left: builder preview -->
        <div class="panel" id="builder-preview">
          <div style="position:absolute; top:12px; left:12px; font-weight:700;">
            Preview
          </div>

          <div id="map">
            <div id="robot">
              <div id="robot-body"></div>
              <div class="wheel wheel-tl"></div>
              <div class="wheel wheel-bl"></div>
              <div class="wheel wheel-tr"></div>
              <div class="wheel wheel-br"></div>
            </div>
          </div>
        </div>

        <!-- right: tray + info -->
        <div class="panel">
          <h5 class="mb-2">Sensor Tray</h5>
          <div class="text-muted mb-3" style="font-size:14px;">
            Place sensors anywhere on the robot body 
          </div>

          <div id="sensor-tray">
            <div class="sensor motion" data-name="Motion & Position" data-desc="Detect movement">
              Motion & Position
            </div>
            <div class="sensor proximity" data-name="Proximity & Range" data-desc="Measure distance">
              Proximity & Range
            </div>
            <div class="sensor vision" data-name="Vision & Camera" data-desc="Capture visuals">
              Vision & Camera
            </div>
          </div>

          <button id="reset-btn" class="btn btn-danger mt-3">Reset</button>
        </div>
      </div>
    </div>

    <!-- ========================= -->
    <!-- SIMULATION SCREEN -->
    <!-- ========================= -->
    <div id="simulation-screen" style="display:none;">

      <div class="panel mode-header mb-3">
        <h3 class="m-0">ðŸš€ SIMULATION</h3>
        <div style="opacity:.85">Drive the robot around the map using arrow keys.</div>
      </div>

      <div id="sim-panel">
        <div class="hint">â¬† move forward Â· â¬… / âž¡ rotate</div>

        <div id="map-sim">
          <div id="robot-sim">
            <div id="robot-body-sim"></div>
            <div class="wheel wheel-tl"></div>
            <div class="wheel wheel-bl"></div>
            <div class="wheel wheel-tr"></div>
            <div class="wheel wheel-br"></div>
          </div>
        </div>

        <button id="reset-sim" class="btn btn-danger mt-3">Reset</button>
      </div>
    </div>

  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
